name: Metrics

on:
  schedule:
    - cron: "0 3 * * *"
  workflow_dispatch:

jobs:
  metrics:
    runs-on: ubuntu-latest
    steps:

      # REPOS Y PERFIL 
      - name: ðŸ¦‘ Perfil y Repositorios
        if: ${{ success() || failure() }}
        uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.METRICS_TOKEN }}
          user: roke741
          filename: profile.svg
          base: header, repositories
          config_display: large
          config_timezone: America/Lima
          config_theme: dark
          repositories_forks: no
          repositories_affiliations: owner
          repositories_privacy: private, public
          output_action: commit
          committer_gist: ${{ secrets.METRICS_TOKEN }}

      # CALENDAR 
      - name: ðŸ¦‘ Calendar
        if: ${{ success() || failure() }}
        uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.METRICS_TOKEN }}
          user: roke741
          filename: calendar.svg
          base: ""
          plugin_calendar: yes
          output_action: commit
          committer_gist: ${{ secrets.METRICS_TOKEN }}

      # LENGUAJES 
      - name: ðŸ¦‘ Lenguajes
        if: ${{ success() || failure() }}
        uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.METRICS_TOKEN }}
          user: roke741
          filename: languages.svg
          base: ""
          plugin_languages: yes
          plugin_languages_visibility: all
          plugin_languages_threshold: 2%
          plugin_languages_details: bytes-size
          plugin_languages_indepth: yes
          plugin_languages_limit: 8
          plugin_languages_ignored: html, css
          output_action: commit
          committer_gist: ${{ secrets.METRICS_TOKEN }}

      # LOGROS 
      - name: ðŸ¦‘ Logros
        if: ${{ success() || failure() }}
        uses: lowlighter/metrics@master
        with:
          token: ${{ secrets.METRICS_TOKEN }}
          user: roke741
          filename: achievements.svg
          base: ""
          output_action: commit
          committer_gist: ${{ secrets.METRICS_TOKEN }}
          plugin_achievements: yes
          plugin_achievements_only: >-
            polyglot, stargazer, sponsor, deployer, member, maintainer, developer,
            scripter, packager, explorer, infographile, manager
          plugin_achievements_display: compact
          plugin_achievements_threshold: X
          plugin_fortune: yes

      # TERMINAL 
      - name: ðŸ¦‘ Terminal
        if: ${{ success() || failure() }}
        uses: lowlighter/metrics@master
        with:
          token: ${{ secrets.METRICS_TOKEN }}
          user: roke741
          base: header, metadata
          delay: 120
          template: terminal
          filename: terminal.svg
          plugin_lines: yes
          description: |
            $ sudo apt install year-2026 --with-coffee
            Reading package lists... Done
            Building dependency tree... Done
            Preparing your next commits ðŸš€
          plugin_lines_sections: base
          plugin_lines_delay: 0
          plugin_lines_message: |
            $ sudo apt install year-2026 --with-coffee
            Reading package lists... Done
            Building dependency tree... Done
            Preparing your next commits ðŸš€
          output_action: commit
          committer_gist: ${{ secrets.METRICS_TOKEN }}

      # TOPICS 
      - name: ðŸ¦‘ Topics
        if: ${{ success() || failure() }}
        uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.METRICS_TOKEN }}
          user: roke741
          filename: topics.svg
          preset: minimal
          base: ""
          plugin_topics: yes
          plugin_topics_mode: mastered
          plugin_topics_limit: 6
          output_action: commit
          committer_gist: ${{ secrets.METRICS_TOKEN }}
